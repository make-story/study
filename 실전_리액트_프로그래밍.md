`실전 리액트 프로그래밍` 책 정리  

# 리액트 실전 활용법 


## 가독성과 생산성을 고려한 컴포넌트 코드 작성법
되도록 컴포넌트를 작성하는 사람 입장에서는 유지 보수하기 쉬운 코드를, 컴포넌트를 사용하는 사람 입장에서는 컴포넌트의 인터페이스를 쉽게 파악할 수 있는 코드를 작성하는 게 좋다.

1. 파일의 최상단에는 속성값의 타입을 정의한다.
```javascript
//import ...

// 컴포넌트 속성값 타입 정의
MyComponent.propTypes = {
    // ...
};
```

2. 컴포넌트 함수의 매개변수는 명명된 매개변수로 정의하는 게 좋다.
```javascript
// 컴포넌트 이름을 꼭 작성하지. function() 처럼 이름 없는 컴포넌트로 만들면 리액트 개발자 도구에서 디버깅이 힘들다.
export default function MyComponent({ prop1, prop2, }) {
    // ...
};
```

3. 컴포넌트 바깥의 변수와 함수는 파일의 가장 밑에 정의한다.
컴포넌트 내부에서 커다란 객체를 생성하는 코드가 있을 때, 가능하다면 컴포넌트 외부에서 상수 변수로 정의해서 사용하도록 하자.  
그래야 렌더링 시 불필요한 객체 생성을 피할 수 있어서 성능상 이점이 있다.   
```javascript
const COLIMNES = [
    { id: 1, name: 'test1' },
    { id: 2, name: 'test2' },
];
const URL_LIST = '/api/products';
function getTotalPrice({ price, total }) {
    // ...
}
```

### 서로 연관된 코드를 한 곳으로 모으기
```javascript
function Profile({ userId }) {
    // 사용자 정보를 가져오는 기능을 한 곳으로 모았다.
    const [ user, setUser ] = useState(null);
    useEffect(() => {
        getUserApi(userId)
        .then(data => seruser(data));
    }, [userId]);

    // 창의 너비를 가져오는 기능을 한곳으로 모았다.
    const [ width, setWidth ] = useState(window.innerWidth);
    useEffect(() => {
        const onResize = () => setWidth(window.innerWidth);
        window.addEventListener("resize", onResize);
        return () => {
            window.removeEventListener("resize", onResize);
        };
    }, []);

    // ...
}
```


### 관심사 분리를 위한 프레젠테이션, 컨테이너 컴포넌트 구분하기  
댄 아브라모프(Dan Abramov)의 블로그 포스트로 잘 알려진 컴포넌트 구분법이 있다.   
UI 처리, API 호출, DB 관리 등의 코드가 같은 곳에 있으면 복잡하기 때문에 이들은 서로 관심사가 다르다로 보고 분리해서 관리하는 게 좋다.  

프레젠테이션 컴포넌트의 정의는 다음과 같다.  
- 비즈니스 로직이 없다.  
- 상태값이 없다. 단, 마우스 오버(mouse over)와 같은 UI효과를 위한 상태값은 제외한다.



### Presentational & Container 분리는 이제 그만?
Dan Abramov  
https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0

```javascript
export default function ShopProducts() {
	const loading = useSelector(state => state.shop.loading);
	const products = useSelector(state => state.shop.products);
	const dispatch = useDispatch();

	useEffect(() => {
		// products 조회 로직 ...
	}, [dispatch]);
	const onPurchase = (product) => {
		/* 결제 로직 ... */
	};

	return (
		<div>{/* UI ... */}</div>
	);
}
```