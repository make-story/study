# 메시지 대기열 Message Queuing (Message Queue, MQ)

`study.git/아키텍처_설계_전략/대규모_트래픽_시스템/메시지_대기열_MQ.md` 참고!

https://dev.to/chegerose/top-5-cloud-native-message-queues-mqs-with-nodejs-support-ak5

https://goyunji.tistory.com/125

`프로세스 또는 프로그램 인스턴스가 데이터를 서로 교환할때 사용하는 통신 방법`

- 최신 클라우드 아키텍처에서는 애플리케이션이 좀 더 쉽게 개발, 배포 및 유지 관리할 수 있도록 더 작고 독립적인 모듈로 구성한다.
- MQ는 이러한 분산 애플리케이션을 위한 통신 및 조정 기능을 제공한다.
- MQ는 각 모듈 애플리케이션의 코딩을 상당히 간소화하면서 동시에 성능, 안정성 및 확장성을 개선할 수 있도록 한다.
- MQ를 사용하면 시스템의 서로 다른 부분이 통신하고 비동기식으로 작업을 처리할 수 있다.
- MQ는 메시지를 임시로 저장하는 간단한 버퍼를 제공하고, 메시지를 전송 및 수신하기 위해 소프트웨어 구성 요소가 queue에 연결하도록 허용하는 엔드포인트를 제공한다.
- 메시지는 보통 크기가 작으며, 요청, 오류 메시지 또는 평범한 정보가 될 수 있다.
- 메시지를 전송하려면 생산자(producer)라고 부르는 구성 요소가 메시지를 대기열에 추가한다.
- 해당 메시지는 소비자(consumer)라고 부르는 또 다른 구성 요소가 메시지를 검색하고 이를 사용해 어떤 작업을 수행할 때까지 해당 queue에 저장된다.

## Message Queue는 언제쓰나요?

메시지 큐는 소비자(Consumer)가 실제로 메시지를 어느 시점에 가져가서 처리하는 지는 보장하지 않는다.  
언젠가는 큐에 넣어둔 메시지가 소비되어 처리될 것이라고 믿는 것이다.  
이러한 비동기적 특성 때문에 메시지 큐는 실패하면 치명적인 핵심 작업보다는 어플리케이션의 부가적인 기능에 사용하는 것이 적합하다.

## 애플리케이션에서 메시지 대기열을 사용하려는 몇 가지 이유가 있습니다.

https://wiki.yowu.dev/ko/Knowledge-base/Nodejs/node-js-and-rabbitmq-a-hands-on-guide-to-message-queues

1. 비동기 처리

메시지 대기열의 주요 이점 중 하나는 작업을 비동기적으로 처리할 수 있다는 것입니다. 즉, 서비스가 느리거나 사용할 수 없는 경우에도 애플리케이션을 계속 실행할 수 있습니다.

예를 들어 전자 상거래 웹 사이트가 있는 경우 사용자가 사이트를 계속 탐색할 수 있도록 백그라운드에서 주문을 처리할 수 있습니다. 또는 소셜 미디어 애플리케이션이 있는 경우 사용자가 콘텐츠를 계속 업로드할 수 있도록 이미지와 비디오를 비동기적으로 처리할 수 있습니다.

2. 디커플링 서비스

메시지 대기열의 또 다른 이점은 서비스를 분리하는 데 사용할 수 있다는 것입니다. 이는 애플리케이션의 다른 부분을 독립적으로 확장할 수 있음을 의미합니다.

예를 들어 이벤트 티켓을 판매하는 웹 사이트가 있는 경우 메시지 대기열을 사용하여 주문을 처리할 수 있습니다. 이렇게 하면 웹 사이트와 독립적으로 주문 처리 서비스를 확장할 수 있습니다.

3. 안정적인 처리

메시지 대기열은 작업을 보다 안정적으로 처리하는 방법도 제공할 수 있습니다. 이는 메시지가 처리될 때까지 대기열에 저장되기 때문입니다.

서비스를 사용할 수 없는 경우 메시지는 서비스가 다시 온라인 상태가 될 때까지 큐에 저장됩니다. 즉, 서비스에 간헐적인 문제가 있어도 애플리케이션을 계속 실행할 수 있습니다.

## message queue 종류

MQ의 종류로는 여러가지가 있는데 `Kafka, RabbitMQ, ActiveMQ(JMS)가 대표적`이다.  
Amazon SQS, Amazon MQ 등도 있다.
