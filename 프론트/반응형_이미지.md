# 반응형 이미지

https://brianflove.com/2014-08-07/retina-display-images/

https://medium.com/@uxshan/quickly-generate-responsive-images-that-work-in-all-browsers-and-massively-reduce-your-download-36a1ef6e4e60

https://learntheweb.courses/topics/responsive-retina-images/

## 레티나 및 고화질 디스플레이 사용자 증가, 반응형 이미지 대응이 필요하게 됨

- 레티나 : 애플이 제창한 마케팅 용어
- 고화질 디스플레이 : 일정 수준의 Pixel 밀도가 넘어서는 고해상도 화면을 지칭하는 단어, 고밀도

디스플레이의 픽셀 밀도가 높다는 것은 곧 작은 화면에 더 많은 픽셀이 들어가 있다는 이야기

---

# 화면밀도 (레티나, 고밀도)

https://brunch.co.kr/@blackindigo-red/18

픽셀 밀도(Pixel Density)는 물리적 공간 (1인치) 안에 얼마나 많은 픽셀이 들어가는지를 나타냅니다.

픽셀의 새 시대는 2010년에 Apple이 레티나 디스플레이의 iPhone을 선보였을 때 시작되었습니다.  
레티나 디스플레이는 인치당 픽셀을 두 배로 늘려서 출력하는 매우 선명한 화면으로, 우리가 이제까지 본 어느 그래픽보다 훨씬 더 선명한 그래픽을 구현했습니다.

레티나 디스플레이에서 사용자 인터페이스(User interface, UI)가 기존과 동일한 물리적 크기를 유지하게 하려면 디자이너들은 픽셀 크기를 두 배로 키워서 디자인해야 합니다.(일반 화면에서 44px의 높이처럼 보이게 하기 위해 레티나 디스플레이에서는 88px로 키워서 디자인을 해야 합니다.)

44pt의 경우
레티나 전 디스플레이 : 44px (1x) / 레티나 디스플레이 : 88px (2x) / 애플의 플러스 사이즈 아이폰 : 132px

## 인치당 화소수(PPI, Pixel Per Inch)

인치당 화소수란 PC나 스마트폰의 화면이 얼마나 선명한지 나타내는 단위
1인치 안에 몇개의 픽셀이 있는가

- 10 PPI
  가로로 10개, 세로로 10개 픽셀 - 10 x 10 = 100 픽셀
  즉 10 PPI 는 1인치에 100개의 픽셀이 있다는 의미

## 픽셀

- 물리적 픽셀 예: 아이폰8 - 750 x 1334
- 논리적 픽셀 예: 아이폰8 - 375 x 667

즉, 물리적 픽셀을 실제 디바이스 화면 사이즈인 논리적 픽셀에 넣은 것

## `고화질 디스플레이에서의 이미지 사이즈`

아이폰8 디바이스 크기 375 x 667 에 맞춰 이미지 사이즈를 준비(예: 200x200 사이즈 이미지)하면,
실제로는 750 x 1334 픽셀 사이즈에서 노출되므로, 이미지는 더 작게 노출된다.
이후 디바이스는 이 작아진 이미지를 다시 375 x 667 디바이스 사이즈에 맞춰 키우게 되므로 이미지는 흐릿해지는 것.

https://www.youtube.com/watch?v=cJeVVfkI9sA

대응방법

1. 모든 곳에 2x 이미지를 로드하고 이미지 높이와 너비를 1x 크기로 설정
2. JavaScript 라이브러리를 사용
3. img srcset HTML5 속성 사용
4. picture HTML5 요소 사용

---

# picture 요소

디스플레이 크기에 따라 적합한 이미지를 노출합니다.

```html
<picture>
  <source srcset="images/small_image.jpg" media="all and (min-width: 586px)" />
  <source srcset="images/wide_image.jpg" media="all and (min-width: 768px)" />
  <img src="images/default_image.jpg" alt="" />
</picture>
```

특정 이미지 파일 형식이 지원되지 않는 경우 대체 이미지 형식을 제공합니다.

```html
<picture>
  <source srcset="images/logo.webp" type="image/webp" />
  <img src="images/logo.png" alt="" />
</picture>
```

대역폭을 절약하고 페이지 로드 시간을 단축합니다.

```html
<picture>
  <source srcset="images/image-768.png 768w, images/image-768-1.5x.png 1.5x" />
  <source srcset="images/image-480.png, images/image-480-2x.png 2x" />
  <img src="images/image.png" alt="" />
</picture>
```

---

```html
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <title>picture test</title>
    <style>
      table {
        border-top: 1px solid #333;
        border-collapse: collapse;
      }

      tr,
      td {
        border-bottom: 1px solid #333;
        padding: 10px;
      }

      .result {
        padding: 10px;
        text-align: center;
      }
    </style>
  </head>

  <body>
    <main>
      <table>
        <thead>
          <tr>
            <th>조건</th>
            <th>이미지</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Retina</td>
            <td>
              <img src="a.jpg?resize=640:640" alt="" />
            </td>
          </tr>
          <tr>
            <td>PC</td>
            <td>
              <img src="b.jpg?resize=400:400" alt="" />
            </td>
          </tr>
          <tr>
            <td>Mobile</td>
            <td>
              <img src="c.jpg?resize=320:320" alt="" />
            </td>
          </tr>
        </tbody>
      </table>

      <div class="result">
        <picture>
          <!-- Retina 디스플레이에서는 고밀도의 이미지를 노출 //-->
          <!-- w는 width, x는 pixel density를 의미 //-->
          <!-- Image file type(type="" 속성값) : https://developer.mozilla.org/en-US/docs/Web/Media/Formats/Image_types //-->
          <!-- 레티나 디스플레이(2x) 적용되어 노출될 때, 이미지 원본이 640이라면, 실제 노출은 320으로 노출됨 (예: 원본이 600 사이즈라면 2x 실제 노출될 때는 300 으로 노출된다는 의미) //-->
          <!-- media 속성 조건보다(예: 값이 "all and (min-width: 1024px)"), 2x 값 조건을 우선하여 노출됨 //-->
          <source srcset="a.jpg?resize=640:640 2x" />
          <source srcset="b.jpg?resize=400:400" media="all and (min-width: 1024px)" />
          <source srcset="c.jpg?resize=320:320" media="all and (max-width: 1023px)" />
          <img src="c.jpg?resize=320:320" alt="" />
        </picture>
      </div>
    </main>
  </body>
</html>
```
