`전문가를 위한 CSS3` 책과 `새로운 CSS 레이아웃` 내용 중

# 다단(멀티 칼럼) 레이아웃 (Multi-column Layout)

새로운 레이아웃 모듈들 중에 가장 오래되고 가장 안정성이 있는 모듈이며 현재 브라우저들의 지원도 받고 있다.
이 모듈을 통해 콘텐츠를 여러 단들 안에 자연스럽게 삽입하고 정리하는 것이 가능해졌다.
문서의 마크업으로부터 완전히 자유로워졌다.

```css
.example {
  column-width: 300px;
  column-count: 3;
}
```

# 플렉스박스 레이아웃 (Flexible box Layout)

포괄적인 레이아웃 모듈들 중의 하나로서, CSS로 웹 페이지를 구성하는 방법을 진정한 의미로 혁신할 수 있는 잠재성을 지니고 있다.

```css
#flex .cards {
  display: flex;
  flex-wrap: wrap; /* 플렉스 아이템이 컨테이너를 벗어나지 않게 하려면, 플렉스 아이템이 여러줄에 걸쳐 표현될 수 있도록 flex-wrap: wrap; 속성을 설정 */
}
#flex .cards > li {
  flex: 1 1 200px; /* 플렉스 아이템이 늘어나거나 줄어들 수 있도록 허용, 적정너비 200픽셀로 설정 */
  border: 1px solid;
}
```

`플렉스 아이템이 다음 줄로 넘어가면 새로운 줄이 플렉스 컨테이너가 됩니다. (플렉스 한 줄에 있는 요소의 컨텐츠 양에 따라, 각 줄 높이가 다름)`

각 줄마다 개별적으로 사용 가능한 공간을 할당한다는 뜻입니다.  
플렉스박스는 바로 위나 아래에 있는 다른 플렉스박스와 선을 맞추어 정렬하지 않습니다.  
이를 가리켜 1차원 레이아웃(one-dimensional layout)이라고 부릅니다.  
한 줄 또는 한 칼럼을 따라 플렉스 아이템을 배치할 수는 있지만 플렉스박스를 이용해 줄과 칸을 동시에 제어할 수는 없습니다.

# 격자 레이아웃 (Grid Layout)

Microsoft 에서 제시한 격자 레이아웃 모듈은 먼저 격자를 구성하고 디자인 요소들을 격자가 만들어낸 다양한 열과 단 안에 삽입하는 방식이다.
열과 단들이 결합하여 셀을 구성한다는 면에서 HTML 테이블과 약간 유사한 개념을 갖는다. 그러나 격자 레이아웃은 CSS에서 완전히 독립적으로 진행되고 마크업이 침해를 받지 않는다.

```css
#grid .cards {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-gap: 20px;
}
#grid .cards > li {
  border: 1px solid;
}
#grid .cards li:nth-child(1) {
  grid-column: 1 / 3; /* 1번째 부터 3번째 전 */
  grid-row: 1;
}
#grid .cards li:nth-child(2) {
  grid-column: 3;
  grid-row: 1;
}
#grid .cards li:nth-child(3) {
  grid-column: 1;
  grid-row: 2 / 4; /* 2번째 부터 4번째 전 */
}
#grid .cards li:nth-child(4) {
  grid-column: 2 / 4; /* 2번째 부터 4번째 전 */
  grid-row: 2;
}
#grid .cards li:nth-child(5) {
  grid-column: 2 / 4; /* 2번째 부터 4번째 전 */
  grid-row: 3;
}
```

2차원 레이아웃(two-dimensional layout)  
줄과 칼럼을 동시에 제어하고 배치할 수 있다는 뜻

`그리드 아이템의 위치는 이름 있는 영역(named area)을 통해서도 설정할 수 있습니다.`  
grid-area 속성을 사용해 카드별로 이름을 정해주었습니다.

```css
.card1 {
  grid-area: a;
}
.card2 {
  grid-area: b;
}
.card3 {
  grid-area: c;
}
.card4 {
  grid-area: d;
}
.card5 {
  grid-area: e;
}
```

grid-template-areas 속성을 컨테이너에 적용했습니다.  
이 속성의 값을 통해 레이아웃의 형태를 정의합니다.

```css
.cards {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  grid-gap: 20px;
  grid-template-areas:
    'a a b'
    '. d d' /* 빈칸은 마침표(.)를 사용해서 만듭니다. */
    'c e e';
}
```

# 리전 (regions: 영역)

Adobe 에서 제안한 새롭고 흥미로운 레이아웃 기법이다. 리전 모듈은 복잡하면서 잡지와 유사한 레이아웃을 만들 수 있다.
페이지상의 여러 요소들 사이로 텍스트를 배치할 수 있다.

# 익스클루전 (exclusions: 전용)

역시 Adobe 에서 획기적으로 제안한 것으로 익스클루전은 텍스트가 열바꿈을 하거나 정렬하는 방식에 있어서 이전과 매우 다른 방식으로 제어할 수 있다.
즉 텍스트 이동 방식에 대하여 자신만의 틀을 만들 수 있다.

---

# 다단 레이아웃

예제:
column-width: 180px;
설명:
일반적인 길이 값
column-width 속성은 정확한 폭을 적용하기보다 최적화된 단 폭을 설정
여유공간이 있으면 그 공간을 활용하여 넓어지게 된다.

예제:
column-count: 4;
설명:
최적화된 폭을 설정하기보다 이 속성은 최적화된 단의 개수를 설정
실제 단의 폭은 가능한 공간에 따라서 계산(단들의 폭은 컨테이너의 폭을 기준으로 함)
600px 폭의 컨테이너가 네 개의 단으로 나뉘면 각 단은 150px가 되며, 단들 사이의 간격을 허용해서 각 단은 실제로 최대 138px까지 가능하다.

예제: columns: 값;
columns: 3; (column-count: 3과 동일)
columns: 180px; (column-width: 180px와 동일)
설명:
column-width, column-count 값을 설정할 수 있다.

예제:
column-gap: 1em; (기본값)
설명:
단들 사이의 간격
단의 폭의 일부를 차지하므로 단의 가로 폭에 대한 값을 결정할 때 이 간격을 고려해야 한다.
단의 간격이 콘텐츠를 가진 단들 사이에 위치하게 된다.

만약 컨테이너의 너비가 600px이고 column-width 값을 180px 이라고 지정했다면 세 개의 단을 구성하고 총 차지하는 너비가 540px이 된다. 이때 60px은 두 개의 간격을 위해 남겨둔 것이다. 그래서 column-gap 값으로 30px이면 충분할 것이다. 반면 30px 이상의 값을 경우는 단과 간격의 총 너비 값이 컨테이너의 너비를 초과하게 되고 이로써 세 개의 단 레이아웃이 두 개의 단으로 이루어진 레이아웃으로 될 것이다.

예제:
column-rule-width: 2px;
column-rule-style: dotted;
column-rule-color: #ccc;
column-rule: 2px dotted #ccc; (단축 사용)
설명:
단에 장식 효과를 더할 수 있게 해주는 속성이다.
보더 속성의 작용과 유사한 방식이다.
column-rule은 물리적인 공간을 차지하지 않기 때문에 column-gap 속성처럼 단의 너비를 잠식하지 않는다.

예제:
column-span: none | all;
설명:
모든 단들을 가로질러 확장되어야 하는 요소들을 대상으로 하는 속성이다.
대표적인 것으로 제목(headings), 인용구(quotations)와 이와 유사한 기타 요소들이 있다.
all 또는 none(기본값) 중에 하나의 값을 선택

예제:
column-fill: balance | auto;
설명:
기본값은 balance인데 이것은 콘텐츠가 마지막단이 부분적으로 채워지면서 짧게 끝이 나지 않도록 가능한 동등하게 콘텐츠를 분배하는 것이다.
다른 값(auto)은 순차적으로 단을 채우게 되는데 이 값을 사용할 경우는 마지막 단이 다른 것보다 훨씬 덜 채워지는 결과가 나올 수 있다. 그러나 auto는 컨테이너의 높이가 제한되어 있을 경우에만 영향을 주고 그렇지 않으면 단들은 언제나 균형을 유지하게 된다.

- 단 분리 처리
  break-before와 break-after 속성은 다단 레이아웃의 요소에 적용된다. 그리고 이 요소의 앞과 뒤에서 분리가 발생해야 할지 말아야 할지를 결정한다.
  뿐만 아니라 그에 대한 분리의 유형 역시 결정한다. 두 속성 모두 동일한 값을 수용한다.

1. auto 는 기본값이며, 어떤 분리 또는 분리의 회피도 해당 요소의 앞 또는 뒤에 적용되지 않는다.
2. always 는 페이지 분리가 항상 해당 요소의 앞 또는 뒤에서 발생하게 된다.
3. avoid 는 어떤 유형의 분리도 해당 요소의 앞 또는 뒤에서 이를 회피한다.
4. left 는 해당 요소의 앞 또는 뒤에 하나 또는 두 개의 페이지 분리가 일어나게 하여 다음 페이지가 왼쪽페이지로 구성이 되게 한다.
5. right 는 해당 요소의 앞 또는 뒤에 하나 또는 두 개의 페이지 분리가 일어나게 하여 다음 페이지가 오른쪽 페이지가 되게 한다.
6. page 는 페이지 분리가 해당 요소의 앞 또는 뒤에 반드시 일어나게 한다.
7. column 은 단의 분리가 해당 요소의 앞 또는 뒤에 반드시 일어나게 한다.
8. avoid-page 는 페이지 분리를 항상 해당 요소의 앞 또는 뒤에서 회피한다.
9. avoid-column 은 해당 요소의 앞 또는 뒤에서 항상 단의 분리를 회피한다.

break-inside 속성(auto, avoid, avoid-page, avoid-column 만 사용가능)은 요소들의 내부에서 단의 분리를 제어할 수 있게 해준다.
대표적인 예는 단락의 중간에서 단의 분리가 일어나지 않도록 하는 것이다.

---

# 플렉스박스 레이아웃

기본적인 기능은 크기를 "유연"하게 조절하는 능력이다. 즉 공간에 따라서 가로 또는 세로의 길이를 조절할 수 있다. 또 플렉스 항목은 가용공간에 대한 비율을 기반으로 크기를 조절할 수도 있다.
또 하나의 인상적인 기능은 시각적인 순서와 방향을 정할 수 있다는 것이다. 간단히 말해서 플렉스박스 레이아웃 모듈은 우리가 원하는 순서나 방향에 따라 플렉스 항목들이 나타나게 할 수 있다.
너비와 간격을 대등하게 하고 또 단의 높이를 동일하게 하고 수직 정렬을 하는 등 과거에는 틀림없이 힘들게 작업해야 했었던 부분들을 제어할 수 있다.

예제:
display: flex;
설명:
블록-레벨의 플렉스 컨테이너 지정

예제:
display: inline-flex;
설명:
인라인-레벨의 플렉스 컨테이너 지정

- flex-direction 속성
  요소의 흐름 방향을 제어하는 것으로 플렉스 항목들이 오른쪽, 왼쪽, 오른쪽, 위쪽 방향 중 어느 쪽으로 배열되어야 하는지를 제어하게 된다.

1. row는 기본값이고, 왼쪽에서 오른쪽으로 나열한다.
2. row-reverse는 오른쪽에서 왼쪽으로 나열한다.
3. column은 항목들을 수직으로 위쪽에서 아래쪽을 향해 나열한다.
4. column-reverse는 항목들을 수직으로 아래쪽에서 위쪽으로 나열한다.

- flex-wrap 속성
  플렉스 항목들이 열을 바꾸는 방법을 제어하는 속성이다.
  값이 적용되면 항목들이 여러 개의 열로 나뉘지 않고 여러 항목들이 너비를 조정해서 하나의 열 안에 모두 끼워 넣어진다.

1. wrap 은 항목들이 컨테이너 안에서 여러 줄로 열 바꿈을 할 수 있게 허용한다.
2. wrap-reverse 항목들이 여러 번 열 바꿈을 할 수 있지만 그 나열 방향은 반대다. wrap이 새로이 생기는 아래쪽 열에 배열한다면 wrap-reverse 는 위쪽의 새로운 열에 배열한다.

- flex-flow 속성
  flex-direction과 flex-wrap 값을 명시하는 단축 속성이다.
  두 개의 매개변수를 순서에 상관없이 지정할 수도 있고 둘 중의 하나를 생략하는 것도 가능하기 때문이다.

- order 속성
  플렉스 항목들이 정확하게 어떤 순서로 배열되어야 하는지를 명시할 수 있게 한다.
  정수 기반의 값을 수용하기 때문에 z-index 개념과 유사한 방식으로 작용한다.
  다만 레이어 층으로 구성하지 않고 요소의 흐름상 플렉스 항목들이 어디에 나타나야 하는지 그 위치를 결정한다.

- justify-content 속성
  수평 정렬을 처리하는 속성이다. (단, 수직으로 쓰는 방식을 사용하거나 flex-direction 값이 column일 경우는 제외된다.)

1. flex-start 는 기본값이며, 플렉스 항목들을 컨테이너의 왼쪽으로 정렬한다.
2. flex-end 는 항목을 컨테이너의 오른쪽으로 정렬한다.
3. center는 항목을 컨테이너의 중앙에 정렬한다.
4. space-between은 첫 번째 항목은 왼쪽 끝, 마지막 항목은 오른쪽 끝에 정렬하고 다른 항목들은 그 사이에 남는 공간을 일정한 간격으로 분배하여 배열한다.
5. space-around는 space-between과 동일하게 적용되지만 첫 번째와 마지막 항목이 각각 왼쪽과 오른쪽의 끝으로 정렬하지 않아도 된다. 간격 역시 정렬된 항목들 주위로 골고루 분배한다.

- align-items 속성
  플렉스 항목의 정렬을 각각의 항목들과 연관시켜서 제어할 수 있게 한다.

1. stretch는 앞서 언급한 대로 기본값이고, 모든 플렉스 항목들이 서로 일치하도록 조정한다.
2. flex-start 는 비슷한 효과를 나타낸다. 각 항목의 높이가 콘텐츠의 양에 따라 결정된다.
3. flex-end 는 flex-start와 동일한 규칙이지만 항목들을 컨테이너의 아래쪽으로 배치한다.
4. center 는 각 항목의 위 아래 잔여 공간을 동일하게 분배하기 때문에 각 항목이 수직을 기준으로 중앙에 정렬한다.
5. baseline 은 모든 항목을 콘텐츠에 의해 지정된 기준선을 중심으로 정렬한다. 기준선은 각 항목마다 다를 수 있다.

- align-content 속성
  여러 열의 플렉스 컨테이너들이 정렬하는 것을 제어하는 속성이다. 즉 플렉스 항목들이 여러 개의 열로 구성되는 것을 허용한다.

1. stretch 기본값으로, 컨테이너의 높이와 동일하도록 항목들이 높이를 조정한다.
2. flex-start 컨테이너의 맨 위쪽으로 열들을 정렬한다. 여유 공간은 이 열들의 아래쪽에 표시된다.
3. flex-end 열들을 컨테이너의 바닥으로 정렬한다. 여유 공간은 이 열들의 위쪽으로 표시된다.
4. center 열들의 위와 아래로 동일하게 공간을 분포시킨다. 그래서 수직 방향을 기준으로 중앙 정렬된 상태가 된다.
5. space-between 컨테이너의 맨 위쪽으로 첫 번째 줄이 오고 마지막 줄은 컨테이너의 바닥에 오게 되며, 그 외의 열들은 그 사이에서 동일한 간격을 두고 정렬하게 된다.
6. space-around, space-between 과 동일한 규칙을 따르지만, 단 남는 공간의 일부가 첫 번째 줄 위와 마지막 줄의 밑에 분포하게 되며 첫 번째 줄과 마지막 줄이 컨테이너의 맨 위와 아래쪽 끝으로 정렬하지 않는다.

- 각 항목 사이에 배분되는 여유 공간은 "초기 기본 너비", "확장 인자", "감소 인자"에 의해서 결정된다.

1. flex-basis 속성은 너비 값을 수용하고 플렉스 항목의 초기 크기를 설정한다. 이 후 남는 공간은 증가/감소 인자들을 근거로 분배한다.
2. flex-grow 속성은 양수 정수값을 수용한다. 이 값은 남는 공간 중 얼마를 지정된 플렉스 항목에 분배해야 하는지 그 정도를 제어한다. 그래서 해당 항목이 플렉스 컨테이너의 다른 항목들에 비해서 얼마나 확장할지를 결정한다.
3. flex-shrink 속성 역시 양수 정수값을 갖는다. 이것은 모자라는 공간을 회수할 때 해당 플렉스 항목이 플렉스 컨테이너상의 다른 항목들에 비해 얼마나 줄어들지를 결정한다.

---

# 격자 레이아웃

CSS 격자 레이아웃은 열과 단을 사용하여 격자를 만들고 그 안에 레이아웃의 요소들을 삽입할 수가 있다. 그리고 모든 것이 콘텐츠와는 별재로서 독립적이다.
CSS 격자 레이아웃을 만들려면 먼저 격자요소(grid element)를 만들어야 한다. 그리고 격자 요소의 콘텐츠가 격자항목(grid item)이 될 것이다. 이것은 플렉스박스 모델과 유사하다.
플렉스 컨테이너와 플렉스 항목 대신 격자 요소와 격자 항목을 만든다고 생각하면 된다.

예제:
display: grid;
설명:
블록-레벨 격자 요소

예제:
display: inline-grid;
설명:
인라인-레벨 격자 요소

- 격자지정
  grid-definition-columns 와 grid-definition-rows 속성을 사용

- 격자 안에 요소 배치하기
  grid-column 과 grid-rows 속성을 사용
  좀 더 정확하게 하고 싶다면 단축되지 않은 보통쓰기 방식 grid-row-start 와 grid-row-end, 그리고 grid-column-start 와 grid-column-end 사용

---

# CSS 리전

콘텐츠가 웹 페이지의 어느 곳이든지 여러 요소들(또는 영역들) 사이를 거침없이 이동할 수 있게 해준다. 개념을 살펴보면 영역 사슬(region chain)과 같은 형태를 구현하는 것이라고 할 수 있다.
콘텐츠는 영역 사슬의 처음부터 마지막까지 순차적으로 진행되거나 콘텐츠가 끝날 때까지 이어지게 된다. 예를 들어서 콘텐츠가 첫 번째 지정된 영역을 완벽하게 꽉 찰 때까지 먼저 채우고 이어서 두 번째 영역으로, 세 번째 영역으로 옮겨가게 되는 방식이다. 이때 웹 페이지상에 실제로 이 영역들이 나타나는 곳과는 상관이 전혀없다.

예제:
flow-into: flow이름;

---

# CSS 익스클루전

핵심적인 개념은 "exclusion areas"(전용 영역)를 만드는 것과 관련이 있다. 이 전용 영역 주변으로 텍스트/인라인 콘텐츠들이 이어지게 되는데 부유 이미지(floated image)와 상당히 유사하다고 할 수 있다. 하지만 전용 상자(exclusion box)의 경우는 부유 이미지처럼 제한적이지 않다.

예제:
wrap-flow: both;
설명:
요소를 전용 상자로 만든다.

- wqap-flow 속성

1. auto 초기 값으로서 전용 상자에 어떤 변화도 일어나지 않는다. 주변 콘텐츠 역시 일반적인 방식으로 진행된다.
2. both 콘텐츠가 전용 상자의 모든 주변으로 진행한다.
3. start 요소의 왼쪽 면 주위로 콘텐츠가 진행하지만 오른쪽 영역은 비워둔다.
4. end 요소의 오른쪽 면 주위로 컨텐츠가 진행하지만 왼쪽 영역은 비워둔다.
5. maximum 콘텐츠가 요소 주변의 가장 큰 여유 공간을 가진 쪽으로 진행하고 그 다른 면은 비워둔다.
6. clear 요소의 왼쪽과 오른쪽에 있는 영역을 모두 비워둔다.
