# 리액트 배열 key

`모던 리액트 Deep Dive` 책 내용 중 - p174

왜 key 가 필요할까?

리액트에서 key 는 리렌더링이 발생하는 동안 형제 요소들 사이에서 동일한 요소를 식별하는 값이다.

`이 변경 사항을 구별하는 작업은 리렌더링이 필요한 컴포넌트를 최소화해야 하므로 반드시 필요한 작업이다.`

---

# 반복문 고유값을 index 부여한 경우 (key 값에 배열 index 값 사용 권장하지 않음)

https://ko.legacy.reactjs.org/docs/lists-and-keys.html

React 공식문서에서는,  
React 에서 컴포넌트를 mapping 할 때는 unique 한 key 값을 주도록 권장된다.  
물론 각 배열의 index 값은 고유해보일 수도 있지만,  
배열이 추가되거나 삭제되는 등의 변형이 일어난다면 이 변화에 따라 하위 컴포넌트의 리렌더링이 발생할 수 있다.

https://robinpokorny.medium.com/index-as-a-key-is-an-anti-pattern-e0349aece318

> 항목의 순서가 바뀔 수 있는 경우 key 에 인덱스를 사용하는 것은 권장하지 않습니다.  
> 이로 인해 성능이 저하되거나 컴포넌트의 state와 관련된 문제가 발생할 수 있습니다.
> 리스트 항목에 명시적으로 key를 지정하지 않으면 React는 기본적으로 인덱스를 key로 사용합니다.

index 를 이용해 key 값을 부여한 경우,  
`특정 값이 사라지면서 index가 다시 부여가 된다.`  
그렇기 때문에 `컴포넌트들의 key 값이 바뀜을 인지한 컴포넌트는 이에 따라 리렌더링이 발생`하게 된다.  
해당 컴포넌트의 값 자체가 바뀐 것도 없는데 key 값 때문에 리렌더링이 일어나는 것은 비효율적이다.

뿐만 아니라 반복적인 index 변경이 발생하게 되면 순간적으로 화면에서의 렌더링 오류가 발생해서 화면을 바라보는 유저로 하여금 혼란스러운 경험을 야기시킬 수도 있다.

반면에 `mapping 된 컴포넌트가 고유한 key 값을 가지고 있다면, 아무리 다른 요소가 삭제되거나 추가되었다고 하더라도 남아있는 요소들에게는 아무런 변화도 일어나지 않았기 때문에 불필요한 리렌더링이 발생하지 않는다.`

## map 반복문 렌더시 key 값 - 리렌더링 주의!

문제 : 데이터 리스트 추가에 따라 컴포넌트가 append 되는 부분만 렌더하는 것이 아닌, 전체 리스트를 다시 렌더링 하는 경우가 있다.
원인 : 반복문 React key 속성값 랜덤인 경우 재렌더링 발생!
