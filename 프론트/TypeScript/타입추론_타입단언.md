# 타입스크립트 타입 추론과 타입 단언

https://kimyang-sun.tistory.com/entry/TypeScript-%ED%83%80%EC%9E%85%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-inference-assertion-%ED%83%80%EC%9E%85-%EC%B6%94%EB%A1%A0-%ED%83%80%EC%9E%85-%EB%8B%A8%EC%96%B8

## inference : 타입 추론으로서 타입을 따로 지정해주지 않아도 타입스크립트에서 똑똑하게 타입을 추론해줍니다.

```javascript
// Type Inference
// 타입을 명시하지 않아도 처음 생성시 문자열로 생성이 되어 string으로 타입 추론이 됩니다.
let string = 'We are the world!';
string = 100; // 문자열 타입에 숫자를 할당하여 오류가 발생합니다.

// 함수의 인자도 마찬가지로 기본값 매개변수가 숫자라면 숫자로 선언됩니다.
function write(number = 1000) {
  return number; // 1000
}
write('number'); // 숫자가 아닌 문자열을 넣으면 오류가 발생합니다.
```

## assertion : 타입 단언으로서 타입을 강제로 강요하여 선언합니다. (타입을 확신할때 사용)

```javascript
// Type Assertion
let anything; // 타입 추론에 의해 any로 선언됩니다.

anything = 100;
anything = 'baby'

let anything2 = anything // anything2는 anything과 같은 any 타입입니다.
let anything2 = 10; // any 타입이어서 10으로 변화합니다.

let anything3 = anything as string; // string으로 타입 단언을 해줍니다.
anything3 = 100; // 문자열로 단언하여 숫자를 할당하니까 오류가 발생합니다.
```

```typescript
// Type assertion
// TypeScript 3.4에 추가된 const assertion 기능을 사용하면, let 변수에 대해서도 const 변수를 사용할 때와 같은 타입 추론 규칙을 적용할 수 있습니다.
let user = {
  name: 'Neo',
  age: 36,
} as const;
user.age = 85; // Error
user.name = 'Evan'; // Error
```

```typescript
const Product = {
  bgImg: `/public/images/@temp_img_discount.png`,
  title: '헤라 루즈 홀릭 런칭',
  tags: '#NEW CLASSIC #NEW COLOR',
  prodImg: `/public/images/@temp_img_prod_s.png`,
  isSoldout: false,
  brandName: '헤라',
  prodName: '헤라 루즈 홀릭 매트 립',
  discountPrice: 38000,
  originalPrice: 50000,
  discountRate: 10,
  prodLink: 'naver.com',
};
const Mock = {
  products: [] as typeof Product[],
};
```

> 타입 단언 문법은 `<Type>` 과 `as Type` 으로 두 종류  
> JSX 를 사용하는 경우 `<Type>` 키워드는 JSX 의 문법과 겹치기 때문에 불편

## 타입 단언에는 DOM에 접근할때 자주 사용됩니다.

```javascript
// 버튼이 있다면 버튼에 접근하지만 버튼이 없다면 null 이 됩니다. (오류발생 가능성)
const button = document.querySelector('button');

// 그렇기 때문에 타입 단언으로 HTMLButtonElement 타입으로 강제로 선언해줍니다.
const button = document.querySelector('button') as HTMLButtonElement;

// 이렇게도 단언해줄 수 있습니다 (값이 무조건 있다고 확신하는 방법)
const button = document.querySelector('button')!; // 끝에 ! 느낌표를 붙혀줍니다.
```

타입 단언에서 !는 무조건 이 요소는 존재한다고 확신할때 사용합니다.

타입 추론 같은 경우는 코드를 깔끔하게 만들고 싶을 때 유용할 수 있겠지만  
타입을 정확히 명시하는 것이 코드를 보며 타입을 바로바로 확인하기 편할 것 같다는 생각이 듭니다.

타입 단언은 해당 타입이 정말 무조건 확신이 있을때가 아니라면 굳이 자주 사용하진 않을 것 같습니다.
