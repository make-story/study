# 서비스 배포

## Jenkins Job

- All : Build, Deploy 실행 파이프라인
- Build : Next.js 빌드
- Deploy : 마지막 빌드 파일 AWS 배포
- Restart : 서버 수동 재시작 (장애 등 이슈대응)

## 젠킨스 배포

1. 정기배포 브랜치(예: release/20220101) > master 로 머지
2. master 에서 git tag(예: 20220101_1) 생성
3. git tag 선택 및 운영 배포

feature 각 요건 개발 → develop 반영 → dev 배포  
develop → release 반영 → STG 배포  
release → master 반영 → PRD 배포

---

# NPM 배포

## 버전규칙

https://docs.npmjs.com/cli/v8/commands/npm-version

<서비스 단위 추가/리뉴얼>.<기능 단위 추가/변경>.<단순 수정(문구/주석/리팩토링)>

- feature
  - test-package@1.8.5-test1, test-package@1.8.5-test2, test-package@1.8.5-test3, ...
  - project-package@9.9.9-project1, project-package@9.9.9-project2, project-package@9.9.9-project3, ...
  - jira-ticket@0.0.0-ticket-test1, jira-ticket@0.0.0-ticket-test2, jira-ticket@0.0.0-ticket-test3, ...
- release
  - test-package@1.8.5

## package.json 에서의 NPM 버전관리

`필히! 중요 모듈은 명확하게 버전을 명시! '^' 등은 사용하지 않음!`

`필히! NPM 내부 패키지를 개발할 경우, 개발하는 패키지가 의존하는 패키지는 package.json 의 "peerDependencies" 항목에 명시!`  
(개발한 패키지가 의존하는 패키지의 명확한 버전을 기입하여, 하용하는 곳에서 동일 의존 패키지의 버전이 다를 경우에 대응)

## 신규 NPM(도구, 라이브러리, 프레임워크 등등) 설치시, 파트 전체 대화채널(워크챗, ABC챗)에 공유

- 예: [공유] XXX 설치하려고 합니다. XXX를 해결하기 위한 목적입니다.
