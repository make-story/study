# `아키텍처 패턴` 중요!

## 아케텍처를 결정하는 요인 - p187

아키텍처는 그냥 결정하는 것이 아니다.  
요즘 특정 아키텍처가 유행한다고 선택해서는 안 된다.  
아키텍처를 결정할 때는 크게 2가지를 고려해야 한다.  
`하나는 기능 요구 사항이고 다른 하나는 품질 속성 또는 비기능 요구사항 이다.`

기능 요구 사항은 소프웨어로 해결하고자 하는 문제와 관련이 있다.

품질 속성 대부분은 요구 사항이 없더라도 경험을 토대로 자연스럽게 도출된다.  
`대표적인 품질 속성이 가용성이다.`  
대부분의 온라인 서비스는 24시간 서비스를 제공하기 때문에 요구 사항에 가용성이 포함되어 있지 않더라도 아키텍처를 설계할 때 당연히 가용성을 고려해야 한다.  
반면 쇼핑몰의 배송 추적 기능은 24시간 가용성을 유지하지 않아도 된다.  
일시적으로 배송 추적 기능이 동작하지 않더라도 쇼핑 소비스를 제공하는 데 큰 문제가 없기 때문에 배송 추적과 관련 아키텍처를 단순화할 수 있다.

## 트레이드 오프 - p190

가용성, 성능, 확장성, 보안, 신뢰성, 유지보수성, 지역화, 연속성 등 아케틱처와 관련된 품질 속성은 다양하다.  
모든 품질 속성을 높일 수 있다면 이상적이겠지만 불가능에 가깝다.  
각 품질 속성을 높이면 시스템 복잡도는 배 이상 증가하기 때문이다.

게다가 서로 영향을 주는 품질 속성도 있다.  
보통 보안 품질 속성을 높이면 성능 품질 속성은 떨어진다.  
보안 품질 속성을 높이기 위해 별도의 암호화 채널을 사용하면 암복호화 처리 과정에서 더 많은 CPU가 사용된다.  
결국 처리량을 낮추고 응답 시간이 늘어나 성능이 저하될 수 있다.

## 주요 아키텍처 품질 속성 - p192

...

## 아키텍처가 중요한 이유 - p194

"적정 소프트웨어 아키텍처(한빛미디어, 2022)"에서는 아키텍처가 중요한 4가지 이유를 언급하고 있다.

- 아키텍처는 시스템의 골격 역할을 한다.
- 아키텍처는 품질 속성에 영향을 미친다.
- 아키텍처는 (대부분) 기능과 직교한다.
- 아케틱처는 시스템을 제한한다.

## 마이크로 서비스로 개발했어요 - p195

한 서비스의 개발 책임자 A씨를 만난 적이 있다.  
A 씨는 품질 문제로 고민하고 있었다.  
서비스 출시 목표 일정을 코앞에 두고 진행한 시연에서 오류가 발생한 적도 있었다고 한다.  
A 씨와 아키텍처에 대한 대화를 나눴는데 대화 도중에 A 씨는 "모두 마이크로서비스로 개발했어요"라고 말했다.  
서비스는 20개 정도 된다고 했다.  
트래픽 증가에 따른 확장처리도 되어 있다고 했다.

마이크로서비스가 20개나 된다는 말에 다소 의아했다.  
A 씨가 책임지고 있는 개발 조직은 백엔드 개발자가 5명, 프론트엔드/모바일 개발자가 5명이었다.  
새로 만드는 서비스에 가까웠기 때문에 서버 확장을 고민할 만큼의 고객도 없었다.  
그런데 서비스를 무려 20개로 분리했다.  
일부 서비스에 장애가 발생했을 때 대응할 수 있는 기법(서킷 브레이커 등)도 적용되어 있지 않았다.  
그야말로 서비스만 잔뜻 쪼갰다.

`시스템 복잡도만 높아지고 이득은 없는 결정을 한 개발 책임자를 전문가라고 할 수 있을까?`  
A 씨는 아마추어 같은 결정을 내렸다.  
`이런 식으로 특정 아키텍처를 적용해서 자아실현을 해서는 안된다.`  
`본인이 하고 싶은게 아닌, 상황에 맞는 적절한 아키텍처를 만들어야 한다는 것을 잊지 말자.`
