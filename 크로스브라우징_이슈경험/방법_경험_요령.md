# input 유효성 실시간 검사할 때

input key 입력시 검사할 경우(예를 들어 "숫자만 입력"),  
해당 input 를 입력한 내용을 복사/붙여넣기 하려는 사용자는  
Ctrl 키만 input 에 넣어도 유효성검사에 걸릴 수 있다. (예를 들어 "숫자만 입력"의 경우 Ctrl 키는 통과못해서 alert 를 노출)  
이 경우 사용성에 불편할 수 있다.

# :has 활용 체크 구현

```html
<form class="form1">
  <fieldset>
    <legend>fieldset</legend>
    <label>
      <input type="checkbox" />
      select me
    </label>
  </fieldset>

  <fieldset>
    <legend>fieldset</legend>
    <label>
      <input type="checkbox" />
      or me
    </label>
  </fieldset>
</form>

<form class="form2">
  <div>
    <div class="icon">💡</div>
    <input id="ch1" type="checkbox" />
    <label for="ch1">select me</label>
  </div>
  <div>
    <span class="icon">🤯</span>
    <input id="ch2" type="checkbox" />
    <label for="ch2">select me</label>
  </div>
</form>
```

```css
body {
  font-family: system-ui;
  padding-top: 10px;
  max-width: 400px;
  margin: 0 auto;
}

p {
  text-align: center;
  line-height: 1.5;
  color: #444;
  font-size: 80%;
}

code {
  font-size: 130%;
  background: #ccc;
  padding: 0 3px;
  border-radius: 2px;
}

form {
  display: flex;
  height: 100px;
  justify-content: space-between;
  margin: 0 25px 50px;
}

.form2 > div {
  margin-top: 10px;
  display: flex;
  align-items: flex-start;
  gap: 5px;
}

.icon {
  transform-origin: 80%;
  transition: all 0.1s;
}

fieldset {
  flex-basis: 100px;
  background: #ccc;
  padding: 1em;
  transition: all 0.3s;
}

fieldset:has(:checked) {
  background: #bd5;
}

.icon:has(+ :checked) {
  transform: scale(2);
}
```

# 모바일 키보드(키패드)에 따른 높이

모바일의 경우 text값을 입력할때 모바일 키보드가 올라오게 되는데 이때 window.innerHeight의 값이 줄어들게 됩니다.  
그래서 웹페이지를 로드하거나 혹은 키보드를 누르지 않았을 때의 window.innerHeight 값을 변수에 선언해두고  
키보드를 입력했을 때의 window.innerHeight값과 비교하는 로직을 같이 쓴다면,  
터치가능한 노트북의 경우를 피할 수 있을 것입니다.

```javascript
let defaultInnerHeight = window.innerHeight;
function isMobile() {
  return navigator.maxTouchPoints && window.innerHeight !== defaultInnerHeight;
}
```

# 모바일(터치) 여부

```javascript
const canHover = !matchMedia('(hover: none)').matches;
if (canHover) {
  document.body.classList.add('can-hover');
}

// 또는
if (
  window.matchMedia('(pointer: coarse)').matches ||
  window.matchMedia('(any-pointer: coarse)').matches
) {
  // touchscreen
}

const isTouchDevice =
  'ontouchstart' in window ||
  window.navigator.MaxTouchPoints > 0 ||
  window.navigator.msMaxTouchPoints > 0 ||
  !!(window.DocumentTouch && window.document instanceof DocumentTouch);
```
